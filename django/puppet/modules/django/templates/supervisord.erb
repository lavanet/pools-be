#
# !!! THIS FILE IS MAINTAINED BY PUPPET !!!
#

[program:<%= @project %>_celery_beat]
user=<%= @user %>
command=<%= @venv %>/bin/celery beat -A config --pidfile="<%= @home %>/celery/beat.pid" --schedule="<%= @home %>/celery/celerybeat-schedule"
directory=<%= @path %>
redirect_stderr=true
stdout_logfile=<%= @home %>/celery/beat.log
environment=LANG=en_US.UTF-8,LC_ALL=en_US.UTF-8
autorestart=true

[program:<%= @project %>_celery_worker]
user=<%= @user %>
command=<%= @venv %>/bin/celery worker -A config --pidfile="<%= @home %>/celery/worker.pid" --concurrency=<%= @celery_processes %>
directory=<%= @path %>
redirect_stderr=true
stdout_logfile=<%= @home %>/celery/worker.log
environment=LANG=en_US.UTF-8,LC_ALL=en_US.UTF-8
autorestart=true

[program:<%= @project %>_uwsgi]
user=<%= @user %>
command=<%= @venv %>/bin/uwsgi --ini <%= @home %>/uwsgi/uwsgi.ini
directory=<%= @path %>
redirect_stderr=true
stdout_logfile=<%= @home %>/uwsgi/uwsgi.log
environment=LANG=en_US.UTF-8,LC_ALL=en_US.UTF-8
autorestart=true
stopsignal=QUIT
